# 🚗 Motor Driver (TB6612 / L298N) - Pin Connection

## การต่อสาย

> ⚠️ **สำคัญ**: ต้องใช้ **ไฟเลี้ยงแยก** สำหรับมอเตอร์!  
> และต้องต่อ Ground พ่วงกัน (Common Ground)

| ขา Motor Driver | ต่อกับ Raspberry Pi | หมายเหตุ |
|-----------------|---------------------|----------|
| PWMA | Pin 32 (GPIO 12) | ควบคุมความเร็ว (PWM) |
| AIN1 | Pin 11 (GPIO 17) | ควบคุมทิศทาง 1 |
| AIN2 | Pin 13 (GPIO 27) | ควบคุมทิศทาง 2 |
| **STBY** | **Pin 1 (3.3V)** | ⚠️ **ต้องต่อ!** เปิดใช้งาน Motor |
| VCC (Logic) | Pin 1 (3.3V) หรือ Pin 2 (5V) | ตามสเปคบอร์ด |
| GND | Pin 6, 9, 14 (GND) | พ่วง GND มอเตอร์ด้วย |
| VM | ไฟภายนอก 6V-12V | ตามสเปคมอเตอร์ |
| MOTOR OUT | มอเตอร์ DC | ขั้ว + และ - |

> 💡 **STBY (Standby)**: ต้องต่อ HIGH (3.3V/5V) เพื่อให้ Motor Driver ทำงาน  
> ถ้าไม่ต่อหรือต่อ LOW = Motor จะไม่หมุน!

---

## แผนผังการต่อ

```
Motor Driver              Raspberry Pi        แหล่งจ่ายภายนอก
┌─────────────┐          ┌──────────────┐    ┌─────────────┐
│ PWMA        │──────────│ Pin 32       │    │             │
│             │          │ (GPIO 12)    │    │             │
│ AIN1        │──────────│ Pin 11       │    │             │
│             │          │ (GPIO 17)    │    │             │
│ AIN2        │──────────│ Pin 13       │    │             │
│             │          │ (GPIO 27)    │    │             │
│ VCC (Logic) │──────────│ Pin 1 (3.3V) │    │             │
│             │          │              │    │             │
│ VM          │──────────│──────────────│────│ (+) 6V-12V  │
│             │          │              │    │             │
│ GND         │────┬─────│ Pin 6 (GND)  │    │             │
│             │    │     │              │    │             │
│ MOTOR OUT + │────│─────│──────────────│────│ Motor (+)   │
│ MOTOR OUT - │────│─────│──────────────│────│ Motor (-)   │
└─────────────┘    │     └──────────────┘    │             │
                   └─────────────────────────│ (-) GND     │
                         Common Ground ──────┘             │
                                             └─────────────┘
```

---

## ตารางควบคุมทิศทาง

| AIN1 | AIN2 | PWM | ผลลัพธ์ |
|:----:|:----:|:---:|---------|
| HIGH | LOW | 0-1 | ▶️ หมุนไปข้างหน้า |
| LOW | HIGH | 0-1 | ◀️ หมุนถอยหลัง |
| HIGH | HIGH | 0 | 🛑 เบรค (หยุดทันที) |
| LOW | LOW | 0 | 💨 ปล่อยลอย (หยุดช้าๆ) |

---

## โค้ดตัวอย่าง

```python
# หมุนไปข้างหน้า
ain1.on()
ain2.off()
pwm_a.value = 0.8  # 80%

# หมุนถอยหลัง
ain1.off()
ain2.on()
pwm_a.value = 0.8

# เบรค
ain1.on()
ain2.on()
pwm_a.value = 0
```

---

## ไฟล์ทดสอบ

```bash
python3 raspberry_pi/test_motor.py
```
